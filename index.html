<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="description" content="Simple no-frills code editor with syntax highlighting." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="react-simple-code-editor" />
    <meta property="og:description" content="Simple no-frills code editor with syntax highlighting." />
    <title>EdgeRules Playground</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      const base = import.meta.env.BASE_URL || '/';
      (async () => {
        try {
          const mod = await import(`${base}pkg-web/edge_rules.js`);
          const init = mod?.default;
          if (typeof init !== 'function') throw new Error('edge_rules init not found');
          await init();
          try { mod.init_panic_hook?.(); } catch {}
          window.__edgeRules = {
            ready: Promise.resolve(true),
            to_trace: (input) => mod.evaluate_all(input),
          };
          window.dispatchEvent(new CustomEvent('edgerules-ready'));
        } catch (error) {
          console.error('EdgeRules loader error', error);
          window.dispatchEvent(new CustomEvent('edgerules-error', { detail: { error } }));
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
  </html>
